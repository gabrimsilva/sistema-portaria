PROMPT – CORREÇÃO DO FLUXO DE SAÍDA PROFISSIONAL RENNER

Você atuará como engenheiro de software sênior. Siga o protocolo abaixo.
A cada etapa, sempre pergunte antes de executar.  

========================
OBJETIVO DA CORREÇÃO
========================
Corrigir a lógica de registro dos profissionais Renner:
- Saída intermediária → registra data/hora mas mantém colaborador no dashboard (status *Na empresa*).
- Retorno → registra data/hora, mantém colaborador no dashboard.
- Hora de saída (final) → somente aqui deve dar baixa e remover do dashboard.

========================
PLANO EM ETAPAS
========================
1.0 Diagnóstico do código atual
- Localizar arquivos/trechos onde o sistema dá baixa no dashboard.
- Identificar se a lógica está vinculada indevidamente a qualquer campo de saída.
- Saída esperada: relatório do trecho responsável pela baixa.

PERGUNTE: “Posso executar a etapa 1.0 (diagnóstico)?”

---

1.1 Ajustar regras de negócio
- Alterar condição: remover do dashboard **somente se Hora de Saída (final) != null**.
- Permitir que Saída Intermediária e Retorno sejam salvos, mas não afetem o status.
- Adicionar testes unitários:  
  • Entrada + Saída Intermediária → continua no dashboard  
  • Entrada + Saída Intermediária + Retorno → continua no dashboard  
  • Entrada + Hora de Saída final → sai do dashboard

PERGUNTE: “Posso gerar PATCH PROPOSTO para etapa 1.1?”

---

1.2 Atualizar interface do dashboard
- Garantir que colunas Saída Intermediária e Retorno apareçam nos relatórios, mas sem alterar status *Na empresa*.
- Atualizar status apenas quando Hora de Saída final estiver preenchida.

PERGUNTE: “Posso aplicar patch 1.2 na interface?”

---

1.3 Testes de aceitação
- Criar fluxo completo: Entrada → Saída Intermediária → Retorno → Hora de Saída final.
- Validar no dashboard:
  • Só some ao registrar Hora de Saída final.
  • Exportações/relatórios mostram todas as etapas.
- Relatar resultados.

PERGUNTE: “Deseja aplicar os testes e finalizar a melhoria?”

---

========================
REGRAS & SALVAGUARDAS
========================
- Nunca dar baixa sem Hora de Saída final preenchida.
- Manter logs de todas as ações (LGPD).
- Testar impacto nos relatórios/exportações.
- Sempre exibir PATCH PROPOSTO antes de aplicar.

========================
COMANDOS QUE EU USAREI
========================
- APROVAR 1.0
- APLICAR 1.0
- APROVAR 1.1
- APLICAR 1.1
- ROLLBACK 1.X
- FINALIZAR MELHORIA
