Prompt — Reformular Relatórios > Profissionais Renner (analisar → propor → executar sob confirmação)

Contexto do produto: Sistema de controle de entrada/saída.
Tela-alvo: Relatórios → Profissionais Renner (funcionários/colaboradores da Renner).
Objetivo desta tarefa:

Exibir todos os cadastros do dia (padrão: hoje) dos profissionais que entraram.

Implementar filtros por data, setor e status.

Na lista, exibir somente os campos: Nome completo, Setor, Placa de veículo / “A pé”, Data/Hora de entrada.

Remover da tela a opção de incluir/cadastrar profissional (nada de botão+modal).

Trabalhar em 3 fases: Análise → Proposta (com diffs) → Execução. Antes de executar, pergunte se pode executar e aguarde minha resposta “executa” ou “não”.

Regras e detalhes de negócio

“Profissionais Renner” = registros do tipo COLABORADOR (ou o equivalente já usado no projeto).

Status:

Em aberto = registro com saida_at nulo.

Finalizado = registro com saida_at não nulo.

Todos = ambos.

Filtro de data: por data única (YYYY-MM-DD). Se houver suporte a intervalo, aceite data_ini e data_fim (opcional). Padrão = hoje no fuso do sistema.

Placa / “A pé”: na coluna, se placa for vazia/nula, renderizar “A pé”; senão, mostrar a placa normalizada (maiúsculas).

Paginação: padrão 20 por página; suportar page e pageSize.

Ordenação: padrão por entrada_at DESC.

FASE A — ANÁLISE (somente leitura, não alterar nada)

Mapear modelo de dados usado para colaboradores e registros de acesso (tabelas/campos).

Localizar rotas/serviços atuais que listam registros, e o botão/modal de “Cadastrar Profissional” para poder ocultar/remover da tela de Relatórios.

Checar se já existem índices úteis (ex.: tipo, entrada_at, setor, saida_at).

Gerar um arquivo RELATORIO_PRO_Renner_ANALISE.md com:

Resumo de arquitetura (back/front).

Tabela OK / FALTA / INCOMPLETO para: filtros, colunas, paginação, remoção do botão, índices.

Saída esperada agora: imprimir no console e salvar o RELATORIO_PRO_Renner_ANALISE.md.

FASE B — PROPOSTA (plano completo + diffs, ainda sem aplicar)

Com base na análise, propor e mostrar:

Back-end

Nova rota (ou ajuste) de relatório, ex.:
GET /relatorios/profissionais-renner?data=YYYY-MM-DD&setor=...&status=aberto|finalizado|todos&page=1&pageSize=20
(Opcional: data_ini, data_fim para intervalo.)

Consulta (Prisma/SQL) com filtros: tipo = COLABORADOR AND DATE(entrada_at)=:data (ou BETWEEN :ini AND :fim) AND setor (se enviado) AND status conforme saida_at.

Resposta JSON: { items: [...], page, pageSize, total } com campos: nome_completo, setor, placa_ou_ape, entrada_at.

Indices recomendados (se faltarem):

CREATE INDEX idx_registros_tipo_entrada ON registros (tipo, entrada_at DESC);

CREATE INDEX idx_registros_setor ON registros (setor);

CREATE INDEX idx_registros_status ON registros (saida_at);

Testes: unitários da query (filtros) + integração da rota.

Front-end

Criar/ajustar página Relatórios → Profissionais Renner com:

Filtros: seletor de data (ou intervalo), setor (dropdown), status (Todos/Em aberto/Finalizado).

Tabela com colunas: Nome completo, Setor, Placa/A pé, Data/Hora de entrada.

Paginação e indicação de contagem total.

Remover/ocultar o botão “Cadastrar Profissional” desta página (e o atalho/modal relacionado).

Mensagens vazias (ex.: “Nenhum registro encontrado para os filtros”).

(Opcional) Exportar CSV do resultado atual.

Entregáveis da Fase B

Arquivo PLANO_PRO_Renner.md contendo:

O plano explicado em tópicos.

Diffs em blocos ```diff para arquivos a criar/editar (back e front).

SQL/migrações necessárias.

Comandos que pretende rodar.

Critérios de aceite e checklist de testes manuais.

Importante: NÃO aplicar alterações nesta fase. Apenas mostre o que será feito.

FASE C — EXECUÇÃO (somente com minha autorização)

Pergunte explicitamente:
“Posso executar as alterações de Relatórios → Profissionais Renner? Responda executa para prosseguir ou não para cancelar.”

Se eu responder executa:

Criar branch feat/relatorio-profissionais-renner.

Aplicar os diffs propostos (back e front).

Rodar migrações/SQL de índices (se houver).

Rodar testes e imprimir resultados.

Mostrar resumo dos arquivos alterados.

Se eu responder não: não aplicar nada; manter apenas os arquivos de análise e plano.

Critérios de Aceite (QA)

Ao abrir a tela, listar entradas de hoje (profissionais) com nome, setor, placa/“A pé”, data/hora de entrada.

Filtros por data, setor e status funcionando e combináveis.

Paginação ok e ordenação por entrada_at DESC.

Nenhuma opção de incluir/cadastrar profissional nessa tela.

Performance adequada (consulta da data retorna em < 300ms com índices).

Testes cobrindo filtros e paginação.

Formato de resposta esperado AGORA

Resumo da análise.

RELATORIO_PRO_Renner_ANALISE.md (conteúdo).

PLANO_PRO_Renner.md com diffs/SQL/comandos.

A pergunta: “Posso executar? (executa / não)”.

Reforço: não executar alterações até eu responder executa.